import{S as e,e as a,_ as n,a as r,aE as t,as as l,i,at as s,o,ap as d,u}from"./docs-9c5485ea.js";import{u as c,r as f}from"./useField-d1ad76e0.js";import{u as p}from"./useChildrenProvider-1b74ddec.js";import{g as v,U as m}from"./Upload-9d2c3cce.js";function h(s){const o=p(),{inputRef:d,disabled:u,validation:f=[],defaultValue:h,hint:g,accept:b,name:y,files:q=new e([]),required:j,clearable:V,onchange:A=a(q,s.onchange)}=s,E=n(s,["inputRef","disabled","validation","defaultValue","hint","accept","name","files","required","clearable","onchange"]);b&&(s.validation=[e=>{const a=r(b);if(a){const n=a.split(",").map((e=>e.trim()));for(let a=0;a<e.length;a++){const r=e[a],l=v(r);if(!n.includes(`.${l}`))return{error:t.extension,data:{key:y,accept:b}}}}},...f]);const{loading:R}=l(),{error:S,element:k,state:w}=c([],d);return o({type:m,props:{...E,clearable:V||i(j,(e=>!e)),files:w,accept:b,name:y,inputRef:k,onchange:e=>{S.value="",null==A||A(e)},error:()=>Boolean(S.value),disabled:()=>{var e;return null!==(e=r(u))&&void 0!==e?e:R.value},hint:()=>S.value||g}})}function g(r){var{defaultValues:t=[],value:i=new e(t),onchange:c,requiredSet:p,name:v}=r,m=n(r,["defaultValues","value","onchange","requiredSet","name"]);const h=u(),g=l(),b=g.ref.value,y=c=a(i,c);if(c=e=>{e!==t&&(g.touched[v]=!0),null==y||y(e)},p&&("PATCH"===g.method?g.validation[v]=[(e,a)=>{if(Array.isArray(e)&&!e.length)return{error:s.required,data:{key:a}}}]:g.validation[v]=f(g.validation[v])),b&&c){const e=()=>{null==c||c(t)};b.addEventListener("reset",e),o((()=>{g.destroyed||b.removeEventListener("reset",e)}))}return{type:d,props:{...m,name:v,value:i,onchange:c},children:[h]}}export{g as F,h as a};
