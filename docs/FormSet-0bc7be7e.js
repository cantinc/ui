import{S as e,e as a,_ as n,a as r,aL as t,ay as s,i as l,as as i,az as o,o as u,av as d,u as c}from"./docs-87b449de.js";import{u as f,r as v}from"./useField-0d189786.js";import{g as m,U as p}from"./Upload-6f0229f5.js";function h(o){const u=i(),{inputRef:d,disabled:c,validation:v=[],defaultValue:h,hint:g,accept:y,name:b,files:V=new e([]),required:j,clearable:q,onchange:A=a(V,o.onchange)}=o,E=n(o,["inputRef","disabled","validation","defaultValue","hint","accept","name","files","required","clearable","onchange"]);y&&(o.validation=[e=>{const a=r(y);if(a){const n=a.split(",").map((e=>e.trim()));for(let a=0;a<e.length;a++){const r=e[a],s=m(r);if(!n.includes(`.${s}`))return{error:t.extension,data:{key:b,accept:y}}}}},...v]);const{loading:L}=s(),{error:R,element:S,state:k}=f([],d);return u({type:p,props:{...E,clearable:q||l(j,(e=>!e)),files:k,accept:y,name:b,inputRef:S,onchange:e=>{R.value="",null==A||A(e)},error:()=>Boolean(R.value),disabled:()=>{var e;return null!==(e=r(c))&&void 0!==e?e:L.value},hint:()=>R.value||g}})}function g(r){var{defaultValues:t=[],removeValue:l,value:i=new e(t=null==t?void 0:t.map((e=>Object.assign(Object.assign({},e),{removeValue:l})))),onchange:f,requiredSet:m,name:p}=r,h=n(r,["defaultValues","removeValue","value","onchange","requiredSet","name"]);const g=c(),y=s(),b=y.ref.value;if(f=a(i,f),m){const e="PATCH"===y.method?e=>{y.validation[e]=[(e,a)=>{if(!e||Array.isArray(e)&&!e.length)return{error:o.required,data:{key:a}}}]}:e=>{y.validation[e]=v(y.validation[e])};Array.isArray(p)?p.forEach(e):p&&e(p)}if(b&&f){const e=()=>{null==f||f(t)};b.addEventListener("reset",e),u((()=>{y.destroyed||b.removeEventListener("reset",e)}))}return{type:d,props:{...h,name:p,value:i,onchange:f},children:[g]}}export{g as F,h as a};
