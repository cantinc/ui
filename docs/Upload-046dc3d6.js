import{R as e,S as a,_ as s,d as l,O as n,a as r,e as p,i as t,F as i,c as o,I as c,s as d,az as u,a3 as h,j as v}from"./docs-2558e852.js";const f=/^(.+)\.([^.]+)$/,g=e=>{if(!(null==e?void 0:e.name))return"???";const a=e.name.match(f);return(null==a?void 0:a[2])?a[2].toLowerCase():"???"},y=d(u),m=["jpg","webp","png","jpeg","svg"];function w(){const a=h(),s=v(400),l=new e,p=new n((()=>r(a).src)),t=new n((()=>r(a).name)),i=new n((()=>p.value!==t.value)),c=new n((()=>{var e;return null===(e=t.value)||void 0===e?void 0:e.replace(/\.[^.]+$/,"")})),d=()=>o([u.image,s.value&&u.imageShow,l.value.value&&u.imageHide]);return{type:"delay",props:{show:300,ref:l,hide:300},children:[()=>i.value?{type:"img",props:{class:d,src:p}}:{type:"span",props:{class:d},children:[{type:"span",props:{class:()=>u.name},children:[c]},{type:"span",props:{class:()=>u.extension},children:[()=>g(r(a))]}]}]}}function b(d={}){var{width:u,height:h,radius:v=8,label:f,error:b,hint:j,style:D,props:x,multiple:R,inputRef:$=new e,files:S=new a([]),onchange:k,accept:O,name:T,disabled:F,clearable:L}=d,P=s(d,["width","height","radius","label","error","hint","style","props","multiple","inputRef","files","onchange","accept","name","disabled","clearable"]);const{after:U,before:z}=l(),A=y(),C=new a(!1),H=new n((()=>String(!r(S).length)));k=p(S,k);const I=()=>{C.value=!1},M=()=>{var e;if(!(null===(e=null==$?void 0:$.value)||void 0===e?void 0:e.files))return;const a=[];for(const e of $.value.files){const s=g(e);if(m.includes(s)?a.push(new Promise(((a,s)=>{const l=new FileReader;l.onload=()=>{e.src=String(l.result),a(e)},l.onerror=s,l.readAsDataURL(e)}))):(e.src=e.name,a.push(e)),!r(R))break}Promise.all(a).then((e=>{null==k||k(e)}))},_=t(j,(e=>e&&{type:"span",props:{...null==x?void 0:x.hint,class:()=>A.hint},children:[e]}));return{type:i,props:{element:"label",align:"center",justify:"center",padding:12,gap:12,...P,ondragleave:I,ondragend:I,ondragover:e=>{e.preventDefault(),C.value=!0},ondrop:e=>{var a;return e.preventDefault(),C.value=!1,(null===(a=e.dataTransfer)||void 0===a?void 0:a.files.length)&&$.value&&($.value.files=e.dataTransfer.files,M()),!1},style:Object.assign(Object.assign({},D),{"--ui-upload-radius":t(v,(e=>e?`${e}px`:"")),"--ui-upload-width":t(u,(e=>e?"string"==typeof e?e:`${e}px`:"")),"--ui-upload-height":t(h,(e=>e?`${e}px`:""))}),class:()=>o([A.root,C.value&&A.over,r(b)&&A.error])},children:[{type:"input",props:{...null==x?void 0:x.input,accept:O,name:T,disabled:F,multiple:R,type:"file",ref:$,"data-empty":H,oninput:M,class:()=>A.input}},{type:"div",props:{class:()=>A.labels},children:[{type:"span",props:{class:()=>A.label},children:[f]},{type:"span",props:{class:()=>A.drag},children:[{type:"slot",props:{name:"ui-upload-drag"},children:["Move the file here"]}]},{type:"span",props:{class:()=>A.drop},children:[{type:"slot",props:{name:"ui-upload-drop"},children:["Drop the file here"]}]}]},{type:"span",props:{class:()=>A.focus}},z,{type:"div",props:{class:()=>A.files},children:[{type:"map",props:{of:S,key:"src"},children:[{type:w}]}]},U," ",_,{type:"show",props:{when:L},children:[{type:c,props:{icon:"cross",class:()=>A.clear,onclick:e=>{e.preventDefault(),$.value&&($.value.files=(new DataTransfer).files),null==k||k([])}}}]}]}}export{b as U,g};
