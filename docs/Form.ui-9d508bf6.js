import{e as n,C as e}from"./Component-8e718c3a.js";import{aC as o,ar as t,a6 as r,B as a,X as i,a as s,aD as m}from"./docs-c7a99efa.js";import{F as d}from"./FormInput-355f862a.js";import{F as l}from"./FormSelector-0d532fd0.js";import"./Typography-21d0fa4f.js";import"./useField-17e78dd8.js";import"./Selector-e5197885.js";import"./DropdownMenu-ff1a352b.js";import"./Dropdown-2d15a629.js";const p=/{([a-zA-Z0-9]+)}/g;var c=n({id:"action",title:"action",description:"Use `formActionHandler` context to handle all forms actions in one place.\n",code:"import innet from 'innet'\nimport dom from '@innet/dom'\n\nimport {\n  Form,\n  FormInput,\n  FormSelector,\n  Button,\n  Buttons,\n  notify,\n  formActionHandler,\n  FormActionHandle,\n} from '@cantinc/ui'\n\nconst handleFormAction: FormActionHandle = form => {\n  const params = Array\n    .from(form.fields)\n    .reduce((prev, field) =>\n      `${prev}\\n\\n${field.name}: ${field.state.value}`,\n    '')\n\n  notify(`action: ${use(form.action)}${params}`)\n}\n\ninnet(\n  <context for={formActionHandler} set={handleFormAction}>\n    <Form action='/user'>\n      <FormInput name='name' label='Name' required />\n      <FormSelector\n        exact\n        name='gender'\n        label='Gender'\n        required\n        values={[\n          { value: 'male', label: 'Male' },\n          { value: 'female', label: 'Female' },\n        ]}\n      />\n      <Buttons>\n        <Button flex>\n          Save\n        </Button>\n      </Buttons>\n    </Form>\n  </context>,\n  dom,\n)",example:{type:"context",props:{for:o,set:n=>{const e=Array.from(n.fields).reduce(((n,e)=>`${n}\n\n${e.name}: ${e.state.value}`),"");i(`action: ${s(n.action)}${e}`)}},children:[{type:t,props:{action:"/user"},children:[{type:d,props:{name:"name",label:"Name",required:!0}},{type:l,props:{exact:!0,name:"gender",label:"Gender",required:!0,values:[{value:"male",label:"Male"},{value:"female",label:"Female"}]}},{type:r,children:[{type:a,props:{flex:!0},children:["Save"]}]}]}]}});var u=n({id:"formNotificationHandler",title:"formNotificationHandler",description:"Use `formNotificationHandler` context to handle all forms notifications in one place.\n",code:"import innet from 'innet'\nimport dom from '@innet/dom'\nimport { placeholder } from '@cantinc/utils'\n\nimport {\n  Form,\n  FormInput,\n  Notifications,\n  Button,\n  Buttons,\n  notify,\n  formNotificationHandler,\n} from '@cantinc/ui'\n\nconst handleFormNotification: FormNotificationHandle = (notification, form) => {\n  notify(placeholder(notification, form.submitData), 'success')\n}\n\ninnet(\n  <context for={formNotificationHandler} set={handleFormNotification}>\n    <Form notification='Item \"{name}\" added' action='/items'>\n      <FormInput name='name' label='Name' required />\n      <Buttons>\n        <Button flex>\n          Add\n        </Button>\n      </Buttons>\n    </Form>\n    <Notifications />\n  </context>,\n  dom,\n)",example:{type:"context",props:{for:m,set:n=>{var e,o;n.notification&&i((e=n.notification,o=n.submitData,e.replace(p,((n,e)=>{var t;return null!==(t=o[e])&&void 0!==t?t:n}))),"success")}},children:[{type:t,props:{notification:'Item "{name}" added',action:"/items"},children:[{type:d,props:{name:"name",label:"Name",required:!0}},{type:r,children:[{type:a,props:{flex:!0},children:["Add"]}]}]}]}});var f=n({id:"onsuccess",title:"onsuccess",description:"By default, the form only validates self and call `onsuccess` if the validation is passed.\n",code:"import innet from 'innet'\nimport dom from '@innet/dom'\n\nimport {\n  Form,\n  FormInput,\n  Button,\n  Buttons,\n  notify,\n  Notifications,\n} from '@cantinc/ui'\n\nconst handleSuccess = (form: FormContext) => {\n  const params = Array\n    .from(form.fields)\n    .reduce((prev, field) =>\n        `${prev}\\n\\n${field.name}: ${field.state.value}`,\n    '')\n\n  notify(params)\n}\n\ninnet(\n  <>\n    <Form onsuccess={handleSuccess}>\n      <FormInput\n        name='name'\n        required\n        label='Name'\n      />\n      <FormInput\n        name='password'\n        type='password'\n        required\n        label='Password'\n      />\n      <Buttons>\n        <Button flex>\n          Log-in\n        </Button>\n      </Buttons>\n    </Form>\n    <Notifications />\n  </>,\n  dom,\n)",example:{type:t,props:{onsuccess:n=>{const e=Array.from(n.fields).reduce(((n,e)=>`${n}\n\n${e.name}: ${e.state.value}`),"");i(e)}},children:[{type:d,props:{name:"name",required:!0,label:"Name"}},{type:d,props:{name:"password",type:"password",required:!0,label:"Password"}},{type:r,children:[{type:a,props:{flex:!0},children:["Log-in"]}]}]}}),y=n({id:"reset",title:"reset",description:"You can use a `Button` with type of `reset`.\n",code:"import innet from 'innet'\nimport dom from '@innet/dom'\n\nimport { Form, FormInput, Button, Buttons } from '@cantinc/ui'\n\ninnet(\n  <Form>\n    <FormInput\n      name='name'\n      required\n      defaultValue='Mike'\n      label='Name'\n    />\n    <FormInput\n      name='surname'\n      required\n      defaultValue='Deight'\n      label='Surname'\n    />\n    <Buttons>\n      <Button flex view='secondary' type='reset'>\n        Reset\n      </Button>\n      <Button flex>\n        Log-in\n      </Button>\n    </Buttons>\n  </Form>,\n  dom,\n)",example:{type:t,children:[{type:d,props:{name:"name",required:!0,defaultValue:"Mike",label:"Name"}},{type:d,props:{name:"surname",required:!0,defaultValue:"Deight",label:"Surname"}},{type:r,children:[{type:a,props:{flex:!0,view:"secondary",type:"reset"},children:["Reset"]},{type:a,props:{flex:!0},children:["Log-in"]}]}]}});const F={passwordEqual:"Provided passwords should be equal"};var v=[f,y,c,u,n({id:"validation",title:"validation",description:"You can use validation of the form instead of fields validation.\n",code:"import innet from 'innet'\nimport dom from '@innet/dom'\n\nimport {\n  ValidationError,\n  ValidationMap,\n} from '@cantinc/utils'\n\nimport {\n  Form,\n  FormInput,\n  Button,\n  Buttons,\n  Notifications,\n  notify,\n} from '@cantinc/ui'\n\ninterface Body {\n  name: string\n  password: string\n  password2: string\n}\n\nconst notifications: Record<string, string> = {\n  passwordEqual: 'Provided passwords should be equal',\n}\n\nconst validation: ValidationMap<Body> = {\n  password: [\n    (value, key, { password2 }) => {\n      if (value !== password2) {\n        return {\n          error: 'passwordEqual',\n          data: {\n            key,\n          },\n        }\n      }\n    },\n  ],\n}\n\nconst handleInvalid = (error: ValidationError<any>) => {\n  if (error.error in notifications) {\n    notify(notifications[error.error], 'error')\n  } else {\n    notify('Unknown error', 'error')\n  }\n}\n\n\ninnet(\n  <>\n    <Form oninvalid={handleInvalid} validation={validation}>\n      <FormInput\n        name='name'\n        label='Name'\n        required\n      />\n      <FormInput\n        type='password'\n        name='password'\n        label='Password'\n        required\n      />\n      <FormInput\n        type='password'\n        name='password2'\n        label='Repeat password'\n        required\n      />\n      <Buttons>\n        <Button flex>\n          Save\n        </Button>\n      </Buttons>\n    </Form>\n    <Notifications />\n  </>,\n  dom,\n)",example:{type:t,props:{oninvalid:n=>{n.error in F?i(F[n.error],"error"):i("Unknown error","error")},validation:{password:[(n,e,{password2:o})=>{if(n!==o)return{error:"passwordEqual",data:{key:e}}}]}},children:[{type:d,props:{name:"name",label:"Name",required:!0}},{type:d,props:{type:"password",name:"password",label:"Password",required:!0}},{type:d,props:{type:"password",name:"password2",label:"Repeat password",required:!0}},{type:r,children:[{type:a,props:{flex:!0},children:["Save"]}]}]}})],h=()=>({type:e,props:{component:t,name:"Form",description:"# Form\n\nUse this component to add a form.\n\n```typescript\nimport { Form } from '@cantinc/ui'\n```\n",examples:v}});export{h as default};
