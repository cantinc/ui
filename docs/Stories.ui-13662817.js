import{e,C as s}from"./Component-10445ec5.js";import{R as t,_ as o,S as r,W as n,F as a,a as i,s as p,aI as l}from"./docs-2558e852.js";import{I as u}from"./Image-cca7ab80.js";import{P as d}from"./Popout-6e883fa5.js";import{D as c}from"./Dots-df73406c.js";import{S as v}from"./Slides-7f86adaa.js";import"./Typography-362b426e.js";const m=p(l);function f(e){var{stories:s,ref:p=new t,props:{preview:l}={}}=e,f=o(e,["stories","ref","props"]);const y=m(),w=new t,b=new r(!1),g=new r,h=new r(!0);new n((()=>{var e;const t=g.value;if(void 0!==t&&(null==p?void 0:p.value)){const o=null===(e=s[t].previewRef)||void 0===e?void 0:e.value;if(o&&(w.value=o,p.value)){const e=o.offsetLeft-p.value.offsetWidth/2,s=o.offsetTop-p.value.offsetHeight/2;p.value.scrollTo(e,s)}}}));for(let e=0;e<s.length;e++)s[e].previewRef||(s[e].previewRef=new t);const S=()=>{var e,t;null===(t=(e=s[g.value]).onread)||void 0===t||t.call(e)},j=()=>{b.value=!1},_=s.map(((e,a)=>{var{preview:i,slides:p,previewRef:l,children:u,style:d="",onclick:v,unread:m,ref:f=new t}=e,w=o(e,["preview","slides","previewRef","children","style","onclick","unread","ref"]);const _=new r(0);new n((()=>{b.value&&g.value===a||(_.value=0)}));const x=()=>{_.value<p.length-1?_.value++:g.value<s.length-1?(g.value++,S()):j()};return Object.assign(Object.assign({align:"center",vertical:!0},w),{ref:f,onclick:e=>{e.target===(null==f?void 0:f.value)&&(e.x<document.body.offsetWidth/2?_.value>0?_.value--:g.value>0?(g.value--,S()):j():x()),null==v||v(e)},style:{"background-image":()=>Math.abs(g.value-a)<3?`url("${p[_.value]}")`:""},children:[{type:c,props:{size:6,progress:!0,value:_,class:{root:()=>y.dots,dot:()=>y.dot},onend:x,autoscroll:()=>g.value===a&&h.value,count:p.length}},u]})}));return[{type:a,props:{gap:16,...f,ref:p,class:()=>y.root},children:[s.map((({preview:e,previewRef:s,unread:t},o)=>({type:u,props:{size:110,radius:(null==l?void 0:l.size)||110,...l,ref:s,src:e,class:()=>[y.preview,i(t)&&y.unread],onclick:()=>{g.value=o,b.value=!0,S()}}})))]},{type:d,props:{ontouchstart:()=>{h.value=!1},ontouchend:()=>{h.value=!0},align:"stretch",vertical:!0,show:b,onhide:j,closeButton:!0,background:"var(--color-0)",element:w},children:[{type:v,props:{gap:16,align:"stretch",value:g,onchange:S,class:{root:()=>y.slides,slide:()=>y.slide},flex:!0,slides:_}}]}]}const y=new r(new Set);var w=[e({id:"default",title:"Default",description:"To implement the next example, put pictures near `index.tsx`.\n",code:"import innet from 'innet'\nimport dom from '@innet/dom'\nimport { State } from 'watch-state'\n\nimport { Stories, Story } from '@cantinc/ui'\n\nimport story1 from './story1.jpg'\nimport story1_1 from './story1-1.webp'\nimport story1_2 from './story1-2.webp'\nimport story1_3 from './story1-3.webp'\nimport story2 from './story2.jpg'\nimport story2_1 from './story2-1.jpg'\nimport story2_2 from './story2-2.jpg'\nimport story3 from './story3.webp'\nimport story3_1 from './story3_1.jpg'\n\nconst readStories = new State(new Set<number>())\nconst read = (id: number) => {\n  readStories.value.add(id)\n  readStories.update()\n}\n\nconst stories: Story[] = [\n  {\n    preview: story1,\n    slides: [story1_1, story1_2, story1_3],\n  },\n  {\n    preview: story2,\n    slides: [story2_1, story2_2],\n  },\n  {\n    preview: story3,\n    slides: [story3_1],\n  },\n].map((props, index) => ({\n  ...props,\n  unread: () => !readStories.value.has(index),\n  onread: () => read(index),\n}))\n\ninnet(\n  <Stories stories={stories} />,\n  dom,\n)",example:{type:f,props:{stories:[{preview:"/ui/assets/story1-ee37dfdd.webp",slides:["/ui/assets/story1-1-aa848f0b.webp","/ui/assets/story1-2-46d7e892.webp","/ui/assets/story1-3-be2ba0b9.webp"]},{preview:"/ui/assets/story2-3c505b16.webp",slides:["/ui/assets/story2-1-d68f243c.webp","/ui/assets/story2-2-eba9f82c.webp"]},{preview:"/ui/assets/story3-45febe97.webp",slides:["/ui/assets/story3_1-3f8cd8c3.webp"]}].map(((e,s)=>Object.assign(Object.assign({},e),{unread:()=>!y.value.has(s),onread:()=>{return e=s,y.value.add(e),void y.update();var e}})))}}})],b=()=>({type:s,props:{component:f,name:"Stories",description:"# Stories\n\nUse this component to add stories.\n\n```typescript\nimport { Stories } from '@cantinc/ui'\n```\n\n## Dependencies\n\n- [Flex](/ui/layout/flex)\n- [Image](/ui/layout/image)\n- [Popout](/ui/popups/popout)\n- [Dots](/ui/interaction/dots)\n- [Slides](/ui/interaction/slides)\n",examples:w}});export{b as default};
