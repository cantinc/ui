import{R as e,S as s,_ as a,J as l,a as r,e as n,i as p,c as o,h as t,I as i,s as u,al as c}from"./docs-d3f6b389.js";const d=/^(.+)\.([^.]+)$/,v=e=>{if(!(null==e?void 0:e.name))return"???";const s=e.name.match(d);return(null==s?void 0:s[2])?s[2].toLowerCase():"???"},h=u(c),f=["jpg","webp","png","jpeg"];function g(u={}){var{width:c,height:d,radius:g=8,label:y,dragText:m,dropText:w,error:b,hint:x,style:T,props:j,multiple:D,ref:$=new e,files:S=new s([]),onchange:k}=u,R=a(u,["width","height","radius","label","dragText","dropText","error","hint","style","props","multiple","ref","files","onchange"]);const L=h(),O=new s(!1),P=new l((()=>String(!r(S).length)));k=n(S,k);const U=()=>{O.value=!1},A=()=>{var e;if(!(null===(e=null==$?void 0:$.value)||void 0===e?void 0:e.files))return;const s=[];for(const e of $.value.files){const a=v(e);if(f.includes(a)?s.push(new Promise(((s,a)=>{const l=new FileReader;l.onload=()=>{e.src=String(l.result),s(e)},l.onerror=a,l.readAsDataURL(e)}))):(e.src=a,s.push(e)),!r(D))break}Promise.all(s).then((e=>{null==k||k(e)}))},C=p(x,(e=>e&&{type:"span",props:{...null==j?void 0:j.hint,class:()=>L.hint},children:[e]}));return{type:"label",props:{ondragleave:U,ondragend:U,ondragover:e=>{e.preventDefault(),O.value=!0},ondrop:e=>{var s;return e.preventDefault(),O.value=!1,(null===(s=e.dataTransfer)||void 0===s?void 0:s.files.length)&&$.value&&($.value.files=e.dataTransfer.files,A()),!1},style:Object.assign(Object.assign({},T),{"--ui-upload-radius":p(g,(e=>e?`${e}px`:"")),"--ui-upload-width":p(c,(e=>e?`${e}px`:"")),"--ui-upload-height":p(d,(e=>e?`${e}px`:""))}),class:()=>o([L.root,O.value&&L.over,r(b)&&L.error])},children:[{type:"input",props:{...R,multiple:D,type:"file",ref:$,"data-empty":P,oninput:A,class:()=>L.input}},{type:"span",props:{class:()=>L.label},children:[y]},{type:"span",props:{class:()=>L.drag},children:[m]},{type:"span",props:{class:()=>L.drop},children:[w]},{type:"span",props:{class:()=>L.focus}},{type:"for",props:{of:S,key:"src"},children:[s=>{var a,l;const r=t(400),n=new e,p=()=>o([L.image,r.value&&L.imageShow,n.value.value&&L.imageHide]);return{type:"delay",props:{show:300,ref:n,hide:300},children:[s.value.src.length>10?{type:"img",props:{class:p,src:s.value.src}}:{type:"span",props:{class:p},children:[{type:"span",props:{class:()=>L.name},children:[null===(l=null===(a=s.value)||void 0===a?void 0:a.name)||void 0===l?void 0:l.replace(/\.[^.]+$/,"")]},{type:"span",props:{class:()=>L.extension},children:[s.value.src]}]}]}}]},C,{type:i,props:{icon:"cross",class:()=>L.clear,onclick:e=>{e.preventDefault(),$.value&&($.value.files=(new DataTransfer).files),null==k||k([])}}}]}}export{g as U,v as g};
