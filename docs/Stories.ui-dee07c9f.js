import{e,C as s}from"./Component-8e718c3a.js";import{R as o,_ as t,S as r,a9 as n,F as i,a,I as l,s as p,ay as u}from"./docs-c7a99efa.js";import{I as c}from"./Image-ca104bf7.js";import{P as d}from"./Popout-69371d1b.js";import{D as v}from"./Dots-3d2352bf.js";import{S as f}from"./Slides-41a27d42.js";import"./Typography-21d0fa4f.js";const m=p(u);function y(e){var{stories:s,ref:p=new o,props:{preview:u}={}}=e,y=t(e,["stories","ref","props"]);const w=m(),g=new o,b=new o,h=new r(!1),_=new r,j=new r(!0);new n((()=>{var e;const o=_.value;if(void 0!==o&&(null==p?void 0:p.value)){const t=null===(e=s[o].previewRef)||void 0===e?void 0:e.value;if(t&&(g.value=t,b.value&&b.value.style.setProperty("background-image",`url("${s[o].preview}")`),p.value)){const e=t.offsetLeft-p.value.offsetWidth/2,s=t.offsetTop-p.value.offsetHeight/2;p.value.scrollTo(e,s)}}}));for(let e=0;e<s.length;e++)s[e].previewRef||(s[e].previewRef=new o);const x=()=>{var e,o;null===(o=(e=s[_.value]).onread)||void 0===o||o.call(e)},S=()=>{h.value=!1},R=s.map(((e,i)=>{var{preview:a,slides:l,previewRef:p,children:u,style:c="",onclick:d,unread:f,ref:m=new o}=e,y=t(e,["preview","slides","previewRef","children","style","onclick","unread","ref"]);const g=new r(0);new n((()=>{h.value&&_.value===i||(g.value=0)}));const b=()=>{g.value<l.length-1?g.value++:_.value<s.length-1?(_.value++,x()):S()};return Object.assign(Object.assign({align:"center",vertical:!0},y),{ref:m,onclick:e=>{e.target===(null==m?void 0:m.value)&&(e.x<document.body.offsetWidth/2?g.value>0?g.value--:_.value>0?(_.value--,x()):S():b()),null==d||d(e)},style:{"--ui-stories-story-image":()=>Math.abs(_.value-i)<3?`url("${l[g.value]}")`:""},children:[{type:v,props:{size:6,progress:!0,value:g,class:{root:()=>w.dots,dot:()=>w.dot},onend:b,autoscroll:()=>_.value===i&&j.value,count:l.length}},u]})}));return[{type:i,props:{gap:24,...y,ref:p,class:()=>w.root},children:[s.map((({preview:e,previewRef:s,unread:o},t)=>({type:c,props:{size:110,radius:(null==u?void 0:u.size)||110,...u,ref:s,src:e,class:()=>[w.preview,a(o)&&w.unread],onclick:()=>{_.value=t,h.value=!0,x()}}})))]},{type:d,props:{ontouchstart:()=>{j.value=!1},ontouchend:()=>{j.value=!0},rootRef:b,align:"stretch",vertical:!0,show:h,element:g},children:[{type:f,props:{gap:16,align:"stretch",value:_,onchange:x,class:{root:()=>w.slides,slide:()=>w.slide},flex:!0,slides:R}},{type:l,props:{class:()=>w.close,icon:"cross",size:24,onclick:S}}]}]}var w=[e({id:"default",title:"Default",description:"To implement the next example, put pictures near `index.tsx`.\n",code:"import innet from 'innet'\nimport dom from '@innet/dom'\n\nimport { Stories, Story } from '@cantinc/ui'\n\nimport story1 from './story1.jpg'\nimport story1_1 from './story1-1.webp'\nimport story1_2 from './story1-2.webp'\nimport story1_3 from './story1-3.webp'\nimport story2 from './story2.jpg'\nimport story2_1 from './story2-1.jpg'\nimport story2_2 from './story2-2.jpg'\nimport story3 from './story3.webp'\nimport story3_1 from './story3_1.jpg'\n\nconst stories: Story[] = [\n  {\n    preview: story1,\n    slides: [story1_1, story1_2, story1_3],\n  },\n  {\n    preview: story2,\n    unread: true,\n    slides: [story2_1, story2_2],\n  },\n  {\n    preview: story3,\n    unread: true,\n    slides: [story3_1],\n  },\n]\n\ninnet(\n  <Stories stories={stories} />,\n  dom,\n)",example:{type:y,props:{stories:[{preview:"/ui/assets/story1-ee37dfdd.webp",slides:["/ui/assets/story1-1-aa848f0b.webp","/ui/assets/story1-2-46d7e892.webp","/ui/assets/story1-3-be2ba0b9.webp"],onread:()=>console.log(1)},{preview:"/ui/assets/story2-3c505b16.webp",unread:!0,slides:["/ui/assets/story2-1-d68f243c.webp","/ui/assets/story2-2-eba9f82c.webp"],onread:()=>console.log(2)},{preview:"/ui/assets/story3-45febe97.webp",unread:!0,slides:["/ui/assets/story3_1-3f8cd8c3.webp"],onread:()=>console.log(3)}]}}})],g=()=>({type:s,props:{component:y,name:"Stories",description:"# Stories\n\nUse this component to add stories.\n\n```typescript\nimport { Stories } from '@cantinc/ui'\n```\n\n## Dependencies\n\n- [Flex](/ui/layout/flex)\n- [Image](/ui/layout/image)\n- [Popout](/ui/popups/popout)\n- [Dots](/ui/interaction/dots)\n- [Slides](/ui/interaction/slides)\n",examples:w}});export{g as default};
