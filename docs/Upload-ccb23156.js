import{R as e,S as s,_ as a,G as r,a as l,i as n,c as p,g as o,I as t,s as i,ad as u}from"./docs-7acb2a50.js";import{a as c}from"./Component-873f34f9.js";const d=/^(.+)\.([^.]+)$/,v=e=>{if(!(null==e?void 0:e.name))return"???";const s=e.name.match(d);return(null==s?void 0:s[2])?s[2].toLowerCase():"???"},f=i(u),h=["jpg","webp","png","jpeg"];function g(i={}){var{width:u,height:d,radius:g=8,label:y,dragText:m,dropText:w,error:b,hint:x,style:T,props:j,multiple:D,ref:$=new e,files:S=new s([]),onchange:k}=i,R=a(i,["width","height","radius","label","dragText","dropText","error","hint","style","props","multiple","ref","files","onchange"]);const C=f(),L=new s(!1),O=new r((()=>String(!l(S).length)));k=c(S,k);const P=()=>{L.value=!1},U=()=>{var e;if(!(null===(e=null==$?void 0:$.value)||void 0===e?void 0:e.files))return;const s=[];for(const e of $.value.files){const a=v(e);if(h.includes(a)?s.push(new Promise(((s,a)=>{const r=new FileReader;r.onload=()=>s({src:String(r.result),file:e}),r.onerror=a,r.readAsDataURL(e)}))):s.push({src:a,file:e}),!l(D))break}Promise.all(s).then((e=>{null==k||k(e)}))},A=n(x,(e=>e&&{type:"span",props:{...null==j?void 0:j.hint,class:()=>C.hint},children:[e]}));return{type:"label",props:{ondragleave:P,ondragend:P,ondragover:e=>{e.preventDefault(),L.value=!0},ondrop:e=>{var s;return e.preventDefault(),L.value=!1,(null===(s=e.dataTransfer)||void 0===s?void 0:s.files.length)&&$.value&&($.value.files=e.dataTransfer.files,U()),!1},style:Object.assign(Object.assign({},T),{"--ui-upload-radius":n(g,(e=>e?`${e}px`:"")),"--ui-upload-width":n(u,(e=>e?`${e}px`:"")),"--ui-upload-height":n(d,(e=>e?`${e}px`:""))}),class:()=>p([C.root,L.value&&C.over,l(b)&&C.error])},children:[{type:"input",props:{...R,multiple:D,type:"file",ref:$,"data-empty":O,oninput:U,class:()=>C.input}},{type:"span",props:{class:()=>C.label},children:[y]},{type:"span",props:{class:()=>C.drag},children:[m]},{type:"span",props:{class:()=>C.drop},children:[w]},{type:"span",props:{class:()=>C.focus}},{type:"for",props:{of:S,key:"src"},children:[s=>{var a;const r=o(400),l=new e,n=()=>p([C.image,r.value&&C.imageShow,l.value.value&&C.imageHide]);return{type:"delay",props:{show:300,ref:l,hide:300},children:[s.value.src.length>10?{type:"img",props:{class:n,src:s.value.src}}:{type:"span",props:{class:n},children:[{type:"span",props:{class:()=>C.name},children:[null===(a=s.value.file)||void 0===a?void 0:a.name.replace(/\.[^.]+$/,"")]},{type:"span",props:{class:()=>C.extension},children:[s.value.src]}]}]}}]},A,{type:t,props:{icon:"cross",class:()=>C.clear,onclick:e=>{e.preventDefault(),$.value&&($.value.files=(new DataTransfer).files),null==k||k([])}}}]}}export{g as U};
