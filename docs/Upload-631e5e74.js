import{R as e,S as a,_ as s,d as l,N as r,a as n,e as p,i,F as t,c as o,h as c,I as d,s as u,au as h}from"./docs-b93caad8.js";const v=/^(.+)\.([^.]+)$/,f=e=>{if(!(null==e?void 0:e.name))return"???";const a=e.name.match(v);return(null==a?void 0:a[2])?a[2].toLowerCase():"???"},g=u(h),y=["jpg","webp","png","jpeg","svg"];function m(u={}){var{width:h,height:v,radius:m=8,label:w,error:b,hint:j,style:D,props:x,multiple:R,inputRef:$=new e,files:S=new a([]),onchange:k,accept:T,name:F,disabled:L,clearable:O}=u,P=s(u,["width","height","radius","label","error","hint","style","props","multiple","inputRef","files","onchange","accept","name","disabled","clearable"]);const{after:U,before:A}=l(),C=g(),H=new a(!1),I=new r((()=>String(!n(S).length)));k=p(S,k);const M=()=>{H.value=!1},N=()=>{var e;if(!(null===(e=null==$?void 0:$.value)||void 0===e?void 0:e.files))return;const a=[];for(const e of $.value.files){const s=f(e);if(y.includes(s)?a.push(new Promise(((a,s)=>{const l=new FileReader;l.onload=()=>{e.src=String(l.result),a(e)},l.onerror=s,l.readAsDataURL(e)}))):(e.src=e.name,a.push(e)),!n(R))break}Promise.all(a).then((e=>{null==k||k(e)}))},_=i(j,(e=>e&&{type:"span",props:{...null==x?void 0:x.hint,class:()=>C.hint},children:[e]}));return{type:t,props:{element:"label",align:"center",justify:"center",padding:12,gap:12,...P,ondragleave:M,ondragend:M,ondragover:e=>{e.preventDefault(),H.value=!0},ondrop:e=>{var a;return e.preventDefault(),H.value=!1,(null===(a=e.dataTransfer)||void 0===a?void 0:a.files.length)&&$.value&&($.value.files=e.dataTransfer.files,N()),!1},style:Object.assign(Object.assign({},D),{"--ui-upload-radius":i(m,(e=>e?`${e}px`:"")),"--ui-upload-width":i(h,(e=>e?"string"==typeof e?e:`${e}px`:"")),"--ui-upload-height":i(v,(e=>e?`${e}px`:""))}),class:()=>o([C.root,H.value&&C.over,n(b)&&C.error])},children:[{type:"input",props:{...null==x?void 0:x.input,accept:T,name:F,disabled:L,multiple:R,type:"file",ref:$,"data-empty":I,oninput:N,class:()=>C.input}},{type:"div",props:{class:()=>C.labels},children:[{type:"span",props:{class:()=>C.label},children:[w]},{type:"span",props:{class:()=>C.drag},children:[{type:"slot",props:{name:"ui-upload-drag"},children:["Move the file here"]}]},{type:"span",props:{class:()=>C.drop},children:[{type:"slot",props:{name:"ui-upload-drop"},children:["Drop the file here"]}]}]},{type:"span",props:{class:()=>C.focus}},A,{type:"div",props:{class:()=>C.files},children:[{type:"for",props:{of:S,key:"src"},children:[a=>{var s,l;const r=c(400),n=new e,p=()=>o([C.image,r.value&&C.imageShow,n.value.value&&C.imageHide]);return{type:"delay",props:{show:300,ref:n,hide:300},children:[a.value.src!==a.value.name?{type:"img",props:{class:p,src:a.value.src}}:{type:"span",props:{class:p},children:[{type:"span",props:{class:()=>C.name},children:[null===(l=null===(s=a.value)||void 0===s?void 0:s.name)||void 0===l?void 0:l.replace(/\.[^.]+$/,"")]},{type:"span",props:{class:()=>C.extension},children:[f(a.value)]}]}]}}]}]},U," ",_,{type:"show",props:{when:O},children:[{type:d,props:{icon:"cross",class:()=>C.clear,onclick:e=>{e.preventDefault(),$.value&&($.value.files=(new DataTransfer).files),null==k||k([])}}}]}]}}export{m as U,f as g};
