import{aw as e,S as a,e as n,_ as r,a as t,aQ as i,aD as l,i as s,u as o,aE as u,o as d,aA as c}from"./docs-2558e852.js";import{u as f,r as v}from"./useField-d51b4836.js";import{g as m,U as p}from"./Upload-046dc3d6.js";function h(o){const u=e(),{inputRef:d,disabled:c,validation:v=[],defaultValue:h,hint:g,accept:y,name:b,files:A=new a([]),required:V,clearable:j,onchange:q=n(A,o.onchange)}=o,E=r(o,["inputRef","disabled","validation","defaultValue","hint","accept","name","files","required","clearable","onchange"]);y&&(o.validation=[e=>{const a=t(y);if(a){const n=a.split(",").map((e=>e.trim()));for(let a=0;a<e.length;a++){const r=e[a],t=m(r);if(!n.includes(`.${t}`))return{error:i.extension,data:{key:b,accept:y}}}}},...v]);const{loading:w}=l(),{error:R,element:S,state:k}=f([],d);return u({type:p,props:{...E,clearable:j||s(V,(e=>!e)),files:k,accept:y,name:b,inputRef:S,onchange:e=>{R.value="",null==q||q(e)},error:()=>Boolean(R.value),disabled:()=>{var e;return null!==(e=t(c))&&void 0!==e?e:w.value},hint:()=>R.value||g}})}function g(e){var{defaultValues:t=[],removeValue:i,value:s=new a(t=null==t?void 0:t.map((e=>Object.assign(Object.assign({},e),{removeValue:i})))),onchange:f,requiredSet:m,name:p}=e,h=r(e,["defaultValues","removeValue","value","onchange","requiredSet","name"]);const g=o(),y=l(),b=y.ref.value;if(f=n(s,f),m){const e="PATCH"===y.method?e=>{y.validation[e]=[(a,n)=>{if(Array.isArray(a)&&!a.length||!Array.from(y.fields).find((({name:a})=>a===e)))return{error:u.required,data:{key:n}}}]}:e=>{y.validation[e]=v(y.validation[e])};Array.isArray(p)?p.forEach(e):p&&e(p)}if(b&&f){const e=()=>{null==f||f(t)};b.addEventListener("reset",e),d((()=>{y.destroyed||b.removeEventListener("reset",e)}))}return{type:c,props:{...h,name:p,value:s,onchange:f},children:[g]}}export{g as F,h as a};
