import{S as e,e as a,_ as n,a as r,aI as t,aw as l,i,ax as s,o,at as d,u}from"./docs-dcf3a74d.js";import{u as c,r as f}from"./useField-ded75185.js";import{u as p}from"./useChildrenProvider-a3a18efd.js";import{g as v,U as m}from"./Upload-f21adfdd.js";function h(s){const o=p(),{inputRef:d,disabled:u,validation:f=[],defaultValue:h,hint:g,accept:y,name:b,files:q=new e([]),required:j,clearable:V,onchange:w=a(q,s.onchange)}=s,x=n(s,["inputRef","disabled","validation","defaultValue","hint","accept","name","files","required","clearable","onchange"]);y&&(s.validation=[e=>{const a=r(y);if(a){const n=a.split(",").map((e=>e.trim()));for(let a=0;a<e.length;a++){const r=e[a],l=v(r);if(!n.includes(`.${l}`))return{error:t.extension,data:{key:b,accept:y}}}}},...f]);const{loading:A}=l(),{error:R,element:S,state:k}=c([],d);return o({type:m,props:{...x,clearable:V||i(j,(e=>!e)),files:k,accept:y,name:b,inputRef:S,onchange:e=>{R.value="",null==w||w(e)},error:()=>Boolean(R.value),disabled:()=>{var e;return null!==(e=r(u))&&void 0!==e?e:A.value},hint:()=>R.value||g}})}function g(r){var{defaultValues:t=[],value:i=new e(t),onchange:c,requiredSet:p,name:v}=r,m=n(r,["defaultValues","value","onchange","requiredSet","name"]);const h=u(),g=l(),y=g.ref.value,b=c=a(i,c);if(c=e=>{e!==t&&(g.touched[v]=!0),null==b||b(e)},p&&("PATCH"===g.method?g.validation[v]=[(e,a)=>{if(Array.isArray(e)&&!e.length)return{error:s.required,data:{key:a}}}]:g.validation[v]=f(g.validation[v])),y&&c){const e=()=>{null==c||c(t)};y.addEventListener("reset",e),o((()=>{g.destroyed||y.removeEventListener("reset",e)}))}return{type:d,props:{...m,name:v,value:i,onchange:c},children:[h]}}export{g as F,h as a};
