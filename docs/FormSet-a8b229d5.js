import{S as e,e as a,_ as n,a as t,aF as r,at as l,i,an as s,au as o,o as u,aq as d,u as c}from"./docs-c7a99efa.js";import{u as f,r as p}from"./useField-17e78dd8.js";import{g as v,U as m}from"./Upload-bfbab003.js";function h(o){const u=s(),{inputRef:d,disabled:c,validation:p=[],defaultValue:h,hint:g,accept:b,name:y,files:q=new e([]),required:V,clearable:j,onchange:A=a(q,o.onchange)}=o,F=n(o,["inputRef","disabled","validation","defaultValue","hint","accept","name","files","required","clearable","onchange"]);b&&(o.validation=[e=>{const a=t(b);if(a){const n=a.split(",").map((e=>e.trim()));for(let a=0;a<e.length;a++){const t=e[a],l=v(t);if(!n.includes(`.${l}`))return{error:r.extension,data:{key:y,accept:b}}}}},...p]);const{loading:R}=l(),{error:S,element:k,state:w}=f([],d);return u({type:m,props:{...F,clearable:j||i(V,(e=>!e)),files:w,accept:b,name:y,inputRef:k,onchange:e=>{S.value="",null==A||A(e)},error:()=>Boolean(S.value),disabled:()=>{var e;return null!==(e=t(c))&&void 0!==e?e:R.value},hint:()=>S.value||g}})}function g(t){var{defaultValues:r=[],value:i=new e(r),onchange:s,requiredSet:f,name:v}=t,m=n(t,["defaultValues","value","onchange","requiredSet","name"]);const h=c(),g=l(),b=g.ref.value,y=s=a(i,s);if(s=e=>{e!==r&&(g.touched[v]=!0),null==y||y(e)},f&&("PATCH"===g.method?g.validation[v]=[(e,a)=>{if(Array.isArray(e)&&!e.length)return{error:o.required,data:{key:a}}}]:g.validation[v]=p(g.validation[v])),b&&s){const e=()=>{null==s||s(r)};b.addEventListener("reset",e),u((()=>{g.destroyed||b.removeEventListener("reset",e)}))}return{type:d,props:{...m,name:v,value:i,onchange:s},children:[h]}}export{g as F,h as a};
